<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Registration</title>
    <link href="login_registration.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=New+Rocker&display=swap" rel="stylesheet">
</head>
<script>
    let params = (new URL(document.location)).searchParams;
    var password = document.getElementById("password"); //make password an object
    var repeat_password = document.getElementById("repeat_password"); //make repeat password an object

    function validatePassword() {//make sure passwords are equal
        if (password.value != repeat_password.value) { //passwords dont match
            alert("Passwords do not match");
            response.redirect('public/registration.html')
        }
        else {
            response.redirect('Login_Successful') //passwords match and login is successful
        }
    }

    function setFormAction(querystring){ //reset the form action to include passed-on querystring
        let act = "/process_register";
        document.getElementById("reg_form").action = act + querystring;
    }

    validatePassword();
</script>

<body>
    <main>
        <h1>Login or sign up to continue to purchase</h1>
        <form method="POST" action="/process_register" onsubmit="validatePassword()" id="reg_form">
            <div class="registration-box">
                <input type="text" name="username" size="40" pattern=".[a-z0-9]{3,10}" required
                    title="Minimum 4 Characters, Maximum 10 Characters, Numbers/Letters Only"
                    placeholder="Enter Username"><br><br>
                <input type="email" name="email" size="40" placeholder="Enter Email"
                    pattern="[a-z0-9._]+@[a-z0-9]+\.[a-z]{3,}$" required title="Please enter valid email."><br><br>
                <input type="password" id="password" name="password" size="40" pattern=".{6,}" required
                    title="6 Characters Minimum" placeholder="Enter Password"><br><br>
                <input type="password" id="repeat_password" name="repeat_password" size="40" pattern=".{6,}" required
                    title="6 Characters Minimum" placeholder="Repeat Password"><br><br>
                <input type="submit" value="Submit" id="submit">
        </form>
        </div>
    </main>

    <script>
        setFormAction(document.location.search);
    </script>

</body>

</html>